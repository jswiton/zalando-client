function configure($routeProvider,$locationProvider){$routeProvider.when("/",{templateUrl:"views/home.view.html",controller:"ProductsListController",title:"home"}).when("/search/:category/:pageNumber/:keywords",{templateUrl:"views/products.list.view.html",controller:"ProductsListController",title:"products"}).when("/search/:category",{templateUrl:"views/products.list.view.html",controller:"ProductsListController",title:"category"}).when("/search/:category/:pageNumber",{templateUrl:"views/products.list.view.html",controller:"ProductsListController",title:"category"}).when("/search/:category/:brand/:pageNumber/:brandKey",{templateUrl:"views/brand.view.html",controller:"BrandController",title:"brands"}).when("/product/:id/:name",{templateUrl:"views/product.detail.view.html",controller:"ProductDetailController",title:"product"}).otherwise({redirectTo:"/"}),window.history&&window.history.pushState&&$locationProvider.html5Mode(!0)}function BrandController($scope,$location,$routeParams,zalandoAPIservice,filterService){function activate(){return searchBrandProducts()}function searchBrandProducts(){zalandoAPIservice.searchProducts($scope.filter).success(function(response){$scope.productsList=response})}$scope.productsList=null,$scope.filter=filterService.getFilters(),$scope.filter.pageNumber=$routeParams.pageNumber?$routeParams.pageNumber:1,$scope.filter.category=$routeParams.category?$routeParams.category:"katalog",$scope.filter.brandKey=$routeParams.brandKey?$routeParams.brandKey:"",$scope.filter.keywords="",$scope.filter.keywordsSearch=!1,$scope.filter.brand=$routeParams.brand,filterService.setFilters($scope.filter),activate()}function CategoryController($scope,$location,$routeParams,zalandoAPIservice,filterService){function activate(){getCategories(),searchCategoryProducts(),getRecomendedFilters($scope.filter.category)}function searchCategoryProducts(){zalandoAPIservice.searchProducts($scope.filter).success(function(response){$scope.productsList=response})}function getCategories(){zalandoAPIservice.getCategoriesList($scope.filter.category).success(function(response){$scope.categoriesList=response})}function getRecomendedFilters(categoryKey){zalandoAPIservice.getRecomendedFilters(categoryKey).success(function(response){$scope.recomendedFilters=response})}$scope.productsList=null,$scope.filter=filterService.getFilters(),$scope.filter.pageNumber=$routeParams.pageNumber?$routeParams.pageNumber:1,$scope.filter.category=$routeParams.category?$routeParams.category:"katalog",$scope.filter.keywords="",$scope.filter.keywordsSearch=!1,filterService.setFilters($scope.filter),activate(),$scope.getAllCategories=function(categoryKey){zalandoAPIservice.getCategoriesList(categoryKey).success(function(response){$scope.allCategoriesList=response})}}function ProductDetailController($scope,$routeParams,zalandoAPIservice){function activate(){return getProductDetails()}function getProductDetails(){zalandoAPIservice.getProductDetails($scope.id).success(function(response){$scope.product=response})}$scope.id=$routeParams.id,$scope.product=null,activate(),$scope.getRecommended=function(productId){zalandoAPIservice.getRecommended(productId).success(function(response){$scope.recommendedProducts=response})}}function ProductsListController($scope,$rootScope,$route,$location,$routeParams,zalandoAPIservice,filterService){function activate(){return searchZalandoProducts()}function searchZalandoProducts(){$routeParams.pageNumber&&zalandoAPIservice.searchProducts($scope.filter).success(function(response){$scope.productsList=response})}$scope.productsList=null,$scope.filter=filterService.getFilters(),$scope.filter.pageNumber=$routeParams.pageNumber?$routeParams.pageNumber:1,$scope.filter.keywords=$routeParams.keywords?$routeParams.keywords:"",$scope.filter.category=$routeParams.category?$routeParams.category:"katalog",$scope.filter.keywordsSearch=!0,$scope.key="none",filterService.setFilters($scope.filter),activate(),$scope.go=function(path){$location.path(path)},$scope.reload=function(path){$route.reload()},$scope.reserFilters=function(path){filterService.resetFilters(),$route.reload()}}function backLink(){function link(scope,element,attrs){element.on("click",function(){history.back(),scope.$apply()})}var directive={restrict:"E",template:'<button class="btn">{{back}}</button>',scope:{back:"@back"},link:link};return directive}function ngEnter(){return function(scope,element,attrs){element.bind("keydown keypress",function(event){13===event.which&&(scope.$apply(function(){scope.$eval(attrs.ngEnter)}),event.preventDefault())})}}function aDirective(){return{restrict:"E",link:function(scope,elem,attrs){(attrs.ngClick||""===attrs.href||"#"===attrs.href)&&elem.on("click",function(e){e.preventDefault()})}}}function formatZalandoUrl(){return function(input){return input&&input.length?input.replace("https://www.zalando.pl/",""):void 0}}function mapGender(){var mapGender=function(el){return"MALE"==el?"Mężczyźni":"FEMALE"==el?"Kobiety":void 0};return function(input){return input&&input.length?input.map(mapGender).join(", "):void 0}}function range(){return function(input,total){if(input&&input.length){total=parseInt(total);for(var i=0;total>i;i++)input.push(i);return input}}}function filterService(){function getFilters(){return filter}function setFilters(newFilters){filter=newFilters}function resetFilters(){filter.priceFrom="",filter.priceTo="",filter.colors.color=null,filter.brand="",filter.brandKey=null}var filter={sortMethods:[{sortMethod:"popularity"},{sortMethod:"activationDate"},{sortMethod:"priceDesc"},{sortMethod:"priceAsc"},{sortMethod:"sale"}],lov_sortMethod:[{lookupCode:"popularity",description:"popularność"},{lookupCode:"activationDate",description:"nowości"},{lookupCode:"priceDesc",description:"najwyższa cena"},{lookupCode:"priceAsc",description:"najniższa cena"},{lookupCode:"sale",description:"wyprzedaż"}],pageSize:48,colors:[{color:"black"},{color:"brown"},{color:"beige"},{color:"gray"},{color:"white"},{color:"blue"},{color:"petrol"},{color:"turquoise"},{color:"green"},{color:"olive"},{color:"yellow"},{color:"orange"},{color:"red"},{color:"pink"},{color:"purple"},{color:"gold"},{color:"silver"}],lov_color:[{lookupCode:"black",description:"czarny"},{lookupCode:"brown",description:"brązowy"},{lookupCode:"beige",description:"beżowy"},{lookupCode:"gray",description:"szary"},{lookupCode:"white",description:"biały"},{lookupCode:"blue",description:"niebieski"},{lookupCode:"turquoise",description:"turkusowy"},{lookupCode:"green",description:"zielony"},{lookupCode:"olive",description:"oliwkowy"},{lookupCode:"yellow",description:"żółty"},{lookupCode:"orange",description:"pomarańczowy"},{lookupCode:"red",description:"czerwony"},{lookupCode:"pink",description:"różowy"},{lookupCode:"purple",description:"purpurowy"},{lookupCode:"gold",description:"złoty"},{lookupCode:"silver",description:"srebrny"}],brandKey:null,brand:"",priceFrom:"",priceTo:""};filter.sortMethods.sortMethod="popularity",filter.colors.color=null;var service={getFilters:getFilters,setFilters:setFilters,resetFilters:resetFilters};return service}function zalandoAPIservice($http){function searchProducts(filter){return $http({method:"GET",url:ZALANDO_API_URL+"/articles"+(filter.keywordsSearch?"?fullText="+filter.keywords+"&":"?")+(filter.category?"category="+filter.category:"")+(filter.brandKey?"&brand="+filter.brandKey:"")+"&page="+filter.pageNumber+"&pageSize="+filter.pageSize+(filter.colors.color?"&color="+filter.colors.color:"")+"&price="+(0===filter.priceFrom||""===filter.priceFrom?"*":filter.priceFrom)+"-"+(0===filter.priceTo||""===filter.priceTo?"*":filter.priceTo)+"&sort="+filter.sortMethods.sortMethod})}function getCategoriesList(categoryKey){return $http({method:"GET",url:ZALANDO_API_URL+"/categories/"+categoryKey})}function getProductDetails(id){return $http({method:"GET",url:ZALANDO_API_URL+"/articles/"+id})}function getRecommended(productId){return $http({method:"GET",url:ZALANDO_API_URL+"/recommendations/"+productId})}function getRecomendedFilters(categoryKey){return $http({method:"GET",url:ZALANDO_API_URL+"/filters?category="+categoryKey+categoryKey})}var ZALANDO_API_URL="https://api.zalando.com",service={searchProducts:searchProducts,getCategoriesList:getCategoriesList,getRecommended:getRecommended,getProductDetails:getProductDetails,getRecomendedFilters:getRecomendedFilters};return service}angular.module("ShopApp",["app.controllers","app.services","app.filters","app.directives","ngRoute"]).config(configure),configure.$inject=["$routeProvider","$locationProvider"],angular.module("app.controllers",[]),angular.module("app.controllers").controller("BrandController",BrandController),BrandController.$inject=["$scope","$location","$routeParams","zalandoAPIservice","filterService"],angular.module("app.controllers").controller("CategoryController",CategoryController),CategoryController.$inject=["$scope","$location","$routeParams","zalandoAPIservice","filterService"],angular.module("app.controllers").controller("ProductDetailController",ProductDetailController),ProductDetailController.$inject=["$scope","$routeParams","zalandoAPIservice"],angular.module("app.controllers").controller("ProductsListController",ProductsListController),ProductsListController.$inject=["$scope","$rootScope","$route","$location","$routeParams","zalandoAPIservice","filterService"],angular.module("app.directives",[]),angular.module("app.directives").directive("backLink",backLink),angular.module("app.directives").directive("ngEnter",ngEnter),angular.module("app.directives").directive("aDirective",aDirective),angular.module("app.filters",[]),angular.module("app.filters").filter("formatZalandoUrl",formatZalandoUrl),angular.module("app.filters").filter("mapGender",mapGender),angular.module("app.filters").filter("range",range),angular.module("app.services",[]),angular.module("app.services").factory("filterService",filterService),angular.module("app.services").factory("zalandoAPIservice",zalandoAPIservice),zalandoAPIservice.$inject=["$http"];